<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>CSS3 Transitions and Animations</title>
	<link rel="stylesheet" href="theme/styles.css" type="text/css" media="screen" charset="utf-8" />
</head>

<body>
	<ul>
		
		<li class="slide">
			<section>
				<h1>About Me</h1>
<ul>
	<li>Aron Carroll (<a href="http://twitter.com/ac94">@ac94</a>)</li>
	<li>Slides on GitHub <a href="aron.github.com/async-css3-talk">aron.github.com/async-css3-talk</a></li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Introduction</h1>
<ul>
	<li>Traditional JavaScript.</li>
	<li>Browser support.</li>
	<li><span class="caps">CSS</span> Transition Module.</li>
	<li><span class="caps">CSS</span> Animation Module.</li>
	<li>Limitations of the current implementation.</li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Traditional JavaScript</h1>
<ul>
	<li>Function that changes a <span class="caps">CSS</span> property at an interval.</li>
	<li>Interval stops when property reaches final value.</li>
	<li>Hard codes presentation logic into your JavaScript.</li>
	<li><a href="http://dailyjs.com/tags.html#lmaf">Let&#8217;s make a framework</a> &amp; <a href="http://github.com/madrobby/emile/">emile.js</a>.</li>
</ul>
<pre class="run" style="display:none;">
(function () {
  var box = document.getElementById('traditional-example'),
      duration = 1000,
      start = (new Date).valueOf(),
      finish = start + duration,
      interval;

interval = setInterval(function () {
    var time = (new Date).valueOf(), frame = time > finish ? 1 : (time - start) / duration;

// The thing being animated
    box.style.height = (frame * 500) + 'px';

if (time > finish) {
      clearInterval(interval);
    }
  }, 10);
})();
</pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Traditional JavaScript</h1>
<pre class="highlight js"><code class="highlight js">function animate() {
  var element  = document.getElementById('traditional-example'),
      duration = 1000,
      start    = (new Date).valueOf(),
      finish   = start + duration,
      interval;</code>

<code class="highlight js">  interval = setInterval(function () {
    var time  = (new Date).valueOf(), 
        frame = (time - start) / duration;</code>

<code class="highlight js">    if (time &gt; finish) {
      frame = 1;
      clearInterval(interval);
    }
    element.style.height = (frame * 200) + 'px';
  }, 10);
}
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Library JavaScript Animations</h1>
<ul>
	<li>Most libraries accept a string or object of styles.</li>
	<li>Libraries like MooTools have started to use <span class="caps">CSS</span> classes.</li>
	<li>Allows you to keep styles out of your JavaScript code.</li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Library JavaScript Examples</h1>
<pre class="highlight js"><code class="highlight js">// jQuery Animation
$('#box').animate({left:100, opacity: 0.5}, 1000);</code>

<code class="highlight js">// MooTools Animation
var transition = new Fx.Morph('box', {duration: 1000});
transition.start('.left');</code></pre>
<pre class="highlight css"><code class="highlight css">.left {
  top: 100px;
  opacity: 0.5;
}
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Backstory</h1>
<ul>
	<li>Development started by the WebKit team in 2007.</li>
	<li>Adopted by Apple for use in mobile Safari for iPhone.</li>
	<li>Proposed to W3C as a spec in March 2009.</li>
	<li>Recently other browsers have begun to implement them.</li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Browser Support</h1>
<table>
	<tr>
		<th></th>
		<th>Safari 3+</th>
		<th>Chrome 4+</th>
		<th>FireFox 3.6  </th>
		<th>FireFox 4.0  </th>
		<th>Opera 10.5+  </th>
		<th>IE8       </th>
	</tr>
	<tr>
		<th>Transforms </th>
		<td> <span class="caps">YES</span>        </td>
		<td> <span class="caps">YES</span>        </td>
		<td> <span class="caps">YES</span>            </td>
		<td> <span class="caps">YES</span>            </td>
		<td> <span class="caps">YES</span>            </td>
		<td class="fail">NO   </td>
	</tr>
	<tr>
		<th>Transitions</th>
		<td> <span class="caps">YES</span>        </td>
		<td> <span class="caps">YES</span>        </td>
		<td class="fail">NO      </td>
		<td> <span class="caps">YES</span>            </td>
		<td> <span class="caps">YES</span>            </td>
		<td class="fail">NO   </td>
	</tr>
	<tr>
		<th>Animations </th>
		<td> <span class="caps">YES</span>        </td>
		<td> <span class="caps">YES</span>        </td>
		<td class="fail">NO      </td>
		<td class="fail">NO      </td>
		<td class="fail">NO      </td>
		<td class="fail">NO   </td>
	</tr>
</table>
<p class="note"><span class="caps">NOTE</span>: FireFox 4.0 does not yet support the animation of transforms.</p>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Vendor Prefixes</h1>
<ul>
	<li><code>-moz</code> &#8211; Mozilla</li>
	<li><code>-webkit</code> &#8211; Safari, Chrome, WebKit</li>
	<li><code>-o</code> &#8211; Opera</li>
</ul>
<pre class="highlight css"><code class="highlight css">.animated {
  -moz-transition: all 0.4s ease-out;
  -webkit-transition: all 0.4s ease-out;
  -o-transition: all 0.4s ease-out;
}
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1><span class="caps">CSS</span> Transform Module</h1>
<ul>
	<li>Allows 2D transformation of the rendered <span class="caps">HTML</span> element</li>
	<li>This isnâ€™t even possible in Canvas</li>
	<li>Can be animated in Safari, Chrome and Opera</li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Translate</h1>
<ul>
	<li>Moves the element relatively along the <code>x</code> and <code>y</code> axis</li>
</ul>
<pre class="highlight css"><code class="highlight css">#transform-image {
  transform: translate(20px, 30px);
}</code></pre>
<pre class="run" style="display:none;">
  document.getElementById('transform-image').style.webkitTransform = 'translate(100px, 20px)';
</pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Rotate</h1>
<ul>
	<li>Rotates the element around its <code>transform-origin</code></li>
</ul>
<pre class="highlight css"><code class="highlight css">#transform-image {
  transform: rotate(45deg);
  transform-origin: 50% 50%;
}</code></pre>
<pre class="run" style="display:none;">
  document.getElementById('transform-image').style.webkitTransform = 'rotate(45deg)';
</pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Skew</h1>
<ul>
	<li>Skews the element along the <code>x</code> and <code>y</code> axes</li>
</ul>
<pre class="highlight css"><code class="highlight css">#transform-image {
  transform: skew(15deg, 45deg);
}</code></pre>
<pre class="run" style="display:none;">
  document.getElementById('transform-image').style.webkitTransform = 'skew(15deg, 45deg)';
</pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Scale</h1>
<ul>
	<li>Scaled the element along the <code>x</code> and <code>y</code> axis</li>
</ul>
<pre class="highlight css"><code class="highlight css">#transform-image {
 transform: scale(2, 2);
}</code></pre>
<pre class="run" style="display:none;">
 document.getElementById('transform-image').style.webkitTransform = 'scale(2, 2)';
</pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1><span class="caps">CSS</span> Transition Module</h1>
<ul>
	<li>Automatically animates changes in <span class="caps">CSS</span> properties.</li>
	<li>Most numeric properties can be animated.</li>
	<li>Handles converting between units and colours.</li>
</ul>
<p><img src="theme/images/bad-transition.png" width="850" height="300" alt="Bad Transition"></p>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Plain <span class="caps">CSS</span></h1>
<pre class="highlight css"><code class="highlight css">#image caption {
  opacity: 0;
  height: 0;
}</code>

<code class="highlight css">#image caption:hover {
  opacity: 1;
  height: 30px;
}
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Transition Properties &amp; Duration</h1>
<pre class="highlight css"><code class="highlight css">#image caption {
  opacity: 0;
  height: 0;</code>
  
<code class="highlight css">  transition-property: opacity, height;
  transition-duration: 0.4s, 0.4s;
}</code>

<code class="highlight css">#image caption:hover {
  opacity: 1;
  height: 30px;
}
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Transition Properties &amp; Duration</h1>
<pre class="highlight css"><code class="highlight css">#image caption {
 opacity: 0;
 height: 0;</code>

<code class="highlight css"> transition-property: opacity, height;
 transition-duration: 0.4s, 0.4s;
 transition-timing-function: 
   ease-out, linear;
 transition-delay: 2s, 2s;
}</code>

<code class="highlight css">#image caption:hover {
 opacity: 1;
 height: 30px;
}
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1><span class="caps">CSS</span> Animation Module</h1>
<ul>
	<li>Animations are applied with identifiers in a similar way to transitions.</li>
	<li>Animations are created as keyframes.</li>
	<li>The keyframe is then executed a specified number of times.</li>
	<li>Allows you to build complex animations.</li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Creating the Keyframes</h1>
<ul>
	<li>Keyframes are simply steps in an animation.</li>
</ul>
<pre class="highlight css"><code class="highlight css">.loading-bar {
  background: url(stripes.png) repeat-x 0 0;
}</code>
 
<code class="highlight css">@keyframes loading {
  from { background-position: 0 0; }
  to   { background-position: 100px 0; }
}
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Applying Keyframes to an Element</h1>
<ul>
	<li>Assign the animation to an element by name.</li>
</ul>
<pre class="highlight css"><code class="highlight css">.loading-bar {
  /* Other styles here... */
  background: url(stripes.png) repeat-x 0 0;</code>
  
<code class="highlight css">  animation-name: loading;
  animation-duration: 2s;
  animation-iteration-count: infinite;
  animation-timing-function: linear; 
  animation-direction: normal; /* 'linear' or 'alternate' */
}
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Changing properties using <span class="caps">CSS</span></h1>
<ul>
	<li>Use <span class="caps">CSS</span> pseudo-classes.
	<ul>
		<li><code>:hover</code>  =&gt; mouseover/mouseout</li>
		<li><code>:active</code> =&gt; mousedown/mouseup</li>
		<li><code>:focus</code>  =&gt; focus</li>
	</ul></li>
</ul>
<button id="css-button">Click Me</button>
<pre class="highlight css"><code class="highlight css">
button {
  transition: color 2s ease; 
  border: 3px solid #a50421; background-color: #ff0433; /* Red Button */
}</code>

<code class="highlight css">button:hover {
  background-color: #ffdc00; border-color: #b19904; /* Yellow Button */
}</code>

<code class="highlight css">button:active {
  background-color: #98ff3d; border-color: #68b428; /* Green Button */
}
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Changing properties with JavaScript</h1>
<ul>
	<li>Listen for a <span class="caps">DOM</span> event such as <code>click</code> or <code>mouseover</code>.</li>
	<li>Apply a class to trigger the change in styles.</li>
	<li>Add an event listener to know when the transition is finished.</li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Activation with JavaScript</h1>
<pre class="highlight js"><code class="highlight js">var element = document.getElementById('form'),
    button = document.getElementById('trigger');</code>

<code class="highlight js">// Add an event listener to our button.
button.addEventListener('click', function (event) {
  // When clicked change the styles of the element.
  element.className = 'active';
}, false);
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Transition Callbacks</h1>
<ul>
	<li>The element will fire an event on completion of each transition.</li>
	<li>W3C spec defines the <code>transitionend</code> event supported by FireFox 4.0.</li>
	<li>Webkit decided to use <code>webkitTransitionEnd</code> and Opera use <code>OTransitionEnd</code></li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>TransitionEnd Example</h1>
<pre class="highlight js"><code class="highlight js">element.addEventListener('transitionend', function (event) { 
  event.propertyName; // CSS property associated with the transition.
  event.elapsedTime;  // Time (s) the transition took to complete.
}, false);
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Checking for Browser Support</h1>
<pre class="highlight js"><code class="highlight js">var transition = (function () {
  var transition = '',
      types = ['transition', 'webkitTransition', 'OTransition', 'MozTransition'],
      count = types.length,
      index = 0,
      style;</code>

<code class="highlight js">    if (!window.getComputedStyle) { return transition; }</code>

<code class="highlight js">    style = window.getComputedStyle(document.documentElement, null);
    for (;index &lt; count; index += 0) {
       if (types[index] in style) {
          transition = types[index];
          break;
       }
    }
    return transition;
})();
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Getting the correct Event Handler</h1>
<ul>
	<li>Use the result to set the <code>transitionend</code> event.</li>
</ul>
<pre class="highlight js"><code class="highlight js">var transition_event = 'transitionend';</code>

<code class="highlight js">if (transition === 'webkitTransition' || transition === 'OTransition') {
  transition_event = transition + 'End';
}
</code></pre>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Observations on Performance</h1>
<ul>
	<li>Incredibly useful on Mobile platforms.</li>
	<li>Some browsers leverage the graphics card.</li>
	<li>Not much difference on faster hardware.</li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Limitations</h1>
<ul>
	<li>Vendor prefixes suck.</li>
	<li>Syntax is pretty verbose.</li>
	<li>Callbacks are a little clunky.</li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>When To Use Them?</h1>
<ul>
	<li>To enhance browsing in modern browsers.</li>
	<li>Building mobile apps for WebKit/Opera browsers.</li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Other Links</h1>
<ul>
	<li>W3C Transitions: http://www.w3.org/TR/css3-transitions/</li>
	<li>W3C Animations: http://www.w3.org/TR/css3-animations/</li>
	<li>W3C Transforms: http://www.w3.org/TR/css3-2d-transforms/</li>
	<li>Our Solar System: http://neography.com/experiment/circles/solarsystem/</li>
	<li>HTML5Rocks: http://html5rocks.com/</li>
	<li>Apple HTML5: http://www.apple.com/html5/showcase/gallery/</li>
	<li>Apple Developer Area: http://developer.apple.com/safari/</li>
</ul>
			</section>
		</li>
		
		<li class="slide">
			<section>
				<h1>Creating Transitions in JavaScript</h1>
<ul>
	<li>Simple as defining the transition styles on the element.</li>
	<li>Set the new css properties.</li>
	<li>Listen for the <code>transitionend</code> events (One per property)</li>
	<li>Do something once theyâ€™re all completed.</li>
</ul>
<pre class="highlight js"><code class="highlight js">var element = document.getElementById('form');</code>

<code class="highlight js">function onAnimationComplete() {
  // Do something useful.
}</code>

<code class="highlight js">if (transition) {
  element.style[transition + 'Property'] = 'height';
  element.style[transition + 'Duration'] = '2s';
  element.style[transition + 'TimingFunction'] = 'linear';
  element.style.height = '200px';
  element.addEventListener(transition_end, function (event) {
    onAnimationComplete();
  }, false);
} else {
  // Use standard animation method...
  $(element).animate({height:200}, 2000, onAnimationComplete);
}
</code></pre>
			</section>
		</li>
		
	</ul>
	<footer>
		<p>CSS3 Transitions &amp; Animations â€“ Async, June 2010</p>
	</footer>

	<!-- Slide Specific Elements -->

	<div id="traditional-example">
		<img src="theme/images/totoro-4.png" />
	</div>

	<div id="transform-diagram">
		<img src="theme/images/totoro-6.png" />
		<img src="theme/images/totoro-6.png" />
	</div>

	<div id="transform-example">
		<img id="transform-image" src="theme/images/totoro-6.png" />
	</div>

	<div id="caption-example" class="image-wrapper">
		<img src="theme/images/totoro-1.png" />
		<div class="caption">
			<p>My Neighbour Totoro (1988)</p>
		</div>
	</div>

	<div id="animation-example">
		<img src="theme/images/totoro-2.png" />
	</div>

	<div id="loading-bar"></div>

	<script src="theme/scripts/webinspector.js" type="text/javascript" charset="utf-8"></script>
	<script src="theme/scripts/slideshow.js"    type="text/javascript"></script>
</body>
</html>
